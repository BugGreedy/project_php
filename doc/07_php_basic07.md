## PHP入門編7:関数を理解しよう

### 目次
[7-1_関数について学習しよう](#7-1_関数について学習しよう)</br>
[7-2_関数を作ろう](#7-2_関数を作ろう)</br>
[7-3_引数と戻り値を追加しよう](#7-3_引数と戻り値を追加しよう)</br>
[7-4_スコープを理解しよう](#7-4_スコープを理解しよう)</br>
[7-5_RPGの攻撃シーンを作ろう](#7-5_RPGの攻撃シーンを作ろう)</br>
[7-6_引数のデフォルト値](#7-6_引数のデフォルト値)</br>

***

### 7-1_関数について学習しよう
phpにはもともと多くの関数が組み込まれている。</br>
</br>

- 関数の形</br>
   `関数名(引数)`という形が一般的.</br>
   `例：rand(1,9)`</br>
   ※ちなみに`echo`は関数ではない。したがって()を用いなくても出力できる。</br>

- 関数は自分で作る事もできる。これをメソッドという。</br>
  </br>
  **メソッドのはたらき**
  - 長いコードを分割して整理。→ 見通しがよくなる。
  - コードに名前を付けられる。 → 再利用できる。
  - コードを何度でも呼び出せる。 → 再利用できる
  - コードを組み合わせられる。 → 再利用できる
</br>

***

### 7-2_関数を作ろう
`echo "hello world"`を関数化する。</br>
関数を定義する際のかたちは`function 関数名(){関数の内容}`。</br>
呼び出すときは`関数名();`を使う。
```php
<?php
function say_hello {
  echo "hello world"
}

say_hello();
?>
```
↓出力結果
```
hello world
```

</br>

**備考**
- {}内の事を**ブロック**という。</br>
- phpでは関数名をつけるときに小文字を使用する事が多い。
- 単語の区切りに_(アンダースコア)を用いる。
- 動詞+名詞の組み合わせだと何の関数か分かりやすくて良い。
</br>

また、phpでは関数の呼び出しは**定義の前でも後でも同じように動作する。**</br>
```php
<?php
say_hello();
function say_hello() {
  echo "hello world";
}
?>
```
↓出力結果
```
hello world
```

***

### 7-3_引数と戻り値を追加しよう
引数を任意に設定できる関数を定義する。
```php
<?php
function sum($x,$y) {
  echo $x + $y;
}
sum(30,20);
?>
```
出力結果:`50`</br>
</br>

戻り値を追加して複数の処理で用いる。
```php
<?php
function sum($x,$y) {
  return $x + $y; // echoをreturnにして戻り値として定義する。
}
$num = sum(30,20);
echo $num."\n";

$num2 = sum(300,200);
echo $num2."\n";
?>
```
↓出力結果
```
50
500
```

***

### 7-4_スコープを理解しよう
phpにおいて変数の有効範囲は決まっている。</br>
その変数の有効範囲をスコープという。</br>
- **ローカル変数(ローカルスコープ)**</br>
  ブロックの中で定義した変数は{}(ブロック)の中でしか有効でない。
- **グローバル変数(グローバルスコープ)**</br>
  ブロックの外で定義した変数はプログラムのどこでも使用できる。
```php
<?php
$a = 10;                     //ブロックの外で定義した変数はプログラムのどこでも使用できる。(グローバル変数)
$b = 20;

function sum($x,$y) {
  $a = 3;                     //ブロックの中で定義した変数は{}(ブロック)の中でしか有効でない。(ローカル変数)
  )
  echo "hello ".$a."\n";
  return $x + $y;
}
$num = sum($a,$b);
echo $num."\n";

echo "hello " . $a . "\n";
?>
```
↓出力結果
```
hello 3
30
hello 10
```

***

### 7-5_RPGの攻撃シーンを作ろう
ループと関数定義を使用して攻撃シーンを作成する。
```php
<?php
$enemies = ["アーマーガエル","スターマン","ゲップー"];
foreach($enemies as $enemy){
  // echo "主人公は".$enemy."にダメージを与えた!\n";
  attack($enemy);
}
function attack($target){
  echo "主人公は".$target."を攻撃した。\n";
  $damage = rand(1,20);
  if($damage < 15){
    echo $target."に".$damage."のダメージを与えた!\n";
  }else{
    $critical =$damage * 10;
    echo "クリティカルヒット! ".$target."に".$critical."のダメージを与えた!\n";
  }
  echo "\n";
}
?>
```
↓出力結果
```
主人公はアーマーガエルを攻撃した。
クリティカルヒット! アーマーガエルに160のダメージを与えた!

主人公はスターマンを攻撃した。
クリティカルヒット! スターマンに190のダメージを与えた!

主人公はゲップーを攻撃した。
ゲップーに9のダメージを与えた!
```

***

### 7-6_引数のデフォルト値
引数にデフォルト値を設定する。</br>
関数定義の引数にデフォルト値を渡すことで、引数がない場合はこのデフォルト値を出力する。
```php
<?php
function introduce($name = "村の者"){ //関数定義の引数にデフォルト値を渡す
  echo "私は".$name."です。\n";
}

introduce();
introduce("ハンター");
?>
```
↓出力結果
```
私は村の者です。
私はハンターです。
```




