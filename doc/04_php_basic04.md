## PHP入門編4:配列の基礎、explodeを学ぶ
### 目次
[4-1_配列の概念](#4-1_配列の概念)</br>
[4-2_配列の基本操作１](#4-2_配列の基本操作１)</br>
[4-3_配列の基本操作２](#4-3_配列の基本操作２)</br>
[4-4_explodeで文字列を分割](#4-4_explodeで文字列を分割)</br>
[4-5_配列にデータを格納してみよう１](#4-5_配列にデータを格納してみよう１)</br>
[4-6_配列にデータを格納してみよう２](#4-6_配列にデータを格納してみよう２)</br>

***

### 4-1_配列の概念
これまで一つのものを入れられる箱のようなものとして**変数**を扱ってきた。
```php
//変数のイメージ
$year = 1999;
$name_1 = "勇者";
```
</br>

ここではエクセルの表形式のデータを管理する**配列**を扱う。</br>
配列内の順番を`key`、それに対応する内容を`value`という。</br>
※ `key`は0番から始まる。</br>
例：前から3番目"まつぼっくり"は`key = 2`</br>
| key        | value          |
| ---------- | -------------- |
| 0          | おにぎり       |
| 1          | みかん         |
| 2          | まつぼっくり   |
</br>

***

### 4-2_配列の基本操作１
下記の変数を配列に代入してみる。
```php
<?php
$name_1 = "勇者"
$name_2 = "魔法使い"
?>
```
↓配列にしてみる
```php
<?php
$team =  array('勇者';'魔法使い')
print_r($team);  //配列を出力する関数
?>
```
↓出力結果
</br>
```
Array
(
    [0] => 勇者
    [1] => 魔法使い
)
```
</br>

**array関数(配列に中身を代入する)**</br>
- `$配列名 = array(要素１, 要素２, 要素３…);`</br>
  keyは0から勝手に割り振られる。</br>
  </br>

- 出力する際はechoを用いるとエラーが生じるので下記の関数を用いる。</br>
  **print_r関数(配列を出力する)**</br>
  `print_R(出力したい配列)`
  [参考:print_r](https://www.php.net/manual/ja/function.print-r.php/)</br>
  </br>

- `array()`には変数を代入する事が可能。</br>
  `print_R(出力したい配列)`は`echo`と同様に変数の値を出力する事も可能である。
  ```php
  <?php
  $name_1 = "勇者2";
  
  $team =  array('勇者','魔法使い',$name_1);
  print_r($team);
  print_r($name_1);
  ?>
  ```
  ↓出力結果
  ```
  Array
  (
      [0] => 勇者
      [1] => 魔法使い
      [2] => 勇者2
  )
  勇者2
  ```
  </br>

***

### 4-3_配列の基本操作２
- `echo 配列[n]`で配列のkeyに応じたvalueを出力できる。</br>
  ```php
  <?php
  $team = array("おにぎり","みかん","たまご");
  // print_r($team);
  echo $team[1];
  ?>
  ```
  出力結果→`みかん`</br>
  </br>

- `配列名[] = value`で配列に値を追加できる。</br>
  また、2つ以上追加したいときは行を追加する事で代入可能。</br>
  ```php
  <?php
  $team = array("おにぎり","みかん","たまご");
  $team[] = "ドラゴン";
  $team[] = "ドラゴン";
  print_r($team);
  ?>
  ```
  ↓出力結果
  ```
  Array
  (
      [0] => おにぎり
      [1] => みかん
      [2] => たまご
      [3] => ドラゴン
      [4] => ドラゴン
  )
  ```
  また、`array`を用いなくても`配列名[] = value`で配列を作成する事が可能。
  ```php
  <?php
  $team[] = "ドラゴン";
  $team[] = "ドラゴン";
  print_r($team);
  ?>
  ```
  ↓出力結果
  ```
  Array
  (
      [0] => ドラゴン
      [1] => ドラゴン
  )
  ```
  </br>
- `配列名[n] = value`とする事でkey＝n番目のvalueを上書きする事ができる。
  ```php
  <?php
  $team = array("おにぎり","みかん","たまご");
  $team[] = "ドラゴン";
  $team[] = "ドラゴン";
  $team[3] = "もぐら";
  print_r($team);
  ?>
  ```
  ↓出力結果
  ```php
  Array
  (
      [0] => おにぎり
      [1] => みかん
      [2] => たまご
      [3] => もぐら
      [4] => ドラゴン
  )
  ```
  </br>
- 要素を取り除く
  `unset(配列名[n])`でkey=nのvalueを削除することができる。
  ```php
  <?php
  $team = array("おにぎり","みかん","たまご");
  $team[] = "ドラゴン";
  $team[] = "もぐら";
  unset($team[3]);
  print_r($team);
  ?>
  ```
  ↓出力結果
  ```
  Array
  (
      [0] => おにぎり
      [1] => みかん
      [2] => たまご
      [4] => もぐら
  )
  ```
  ※`unset`で削除した場合はそのkeyが抜けた状態になる。(以降のkeyが繰り下がるわけではない)</br> 

   ***

### 4-4_explodeで文字列を分割
- **explode関数**</br>
  カンマで区切られたCSVデータのような特定の区切り文字で区切られた文字列を分解する。</br>
  `$配列名 = explode("分割したい区切り文字",分割した文字列);
  ```php
  例：入力"みかん、ごりら、あんもち"
  <?php
  $input = trim(fgets(STDIN));
  $array = explode('、',$input);
  print_r($array);
  echo count($array);  //count関数 次の項を参照
  ?>
  ```
  ↓出力結果
  ```
  Array
  (
      [0] => みかん
      [1] => ごりら
      [2] => あんもち
  )
  3
  ```
- **count関数**</br>
  `count(配列名)`でその配列内の要素数を集計する事ができる。</br>
  count関数とループを組み合わせた使い方の例
  ```php
  $input = trim(fgets(STDIN));
  $array = explode(",",$input);
  $num = count($array);
  for($i = 0;$i <= $num-1;$i ++){
      echo $array[$i]."さん\n";
  }
  ```
  ↓出力結果("ティガ,ナルガ,レウス"と入力)
  ```
  ティガさん
  ナルガさん
  レウスさん
  ```

  ***

### 4-5_配列にデータを格納してみよう１
- 入力が何行かわからない場合にすべての値を取得する。</br>
  例えば入力が下記のような場合</br>
  ```
  もぐら
  たまご
  おにぎり
  ```
  このような入力の際に、ループ文を用いて入力されてあるぶんだけ値を取得する方法を記述する.
  `while($input)`←この記述で”$inputに入力がある場合"というループ文になる。</br>
  ```php
  <?php
  $input = trim(fgets(STDIN));
  while($input) {  // 値が空でない限りループして値を取得し続ける
  $array[] =  $input;
  $input = trim(fgets(STDIN));
  } 
    print_r($array); 
  ?>
  ```
  ↓出力結果
  ```
  Array
  (
      [0] => もぐら
      [1] => たまご
      [2] => おにぎり
  )
  ```

  ***

### 4-6_配列にデータを格納してみよう２
配列の取得に`while($input)`としている場合、内容に改行が含まれていると改行以下の入力を取得できない。</br>
これを防ぐために取得の記述を変える必要がある。</br>
入力の空行は空白でなく改行が入っている。改行も取得できるように下記のように`trim`の記述位置を変更する。</br>
```php
<?php
$input = fgets(STDIN); //ここでtrimを使用せずに
while($input){
    $array[] = trim($input);  //配列に代入する際にtrimを用いる。
    $input = fgets(STDIN);
}
print_r($array);
?>

入力：
ごりら
もぐら

ぱんだ
※ ターミナルで入力を終了する際は"ctrl + d"を入力。
上記を行わない場合、改行を含む入力の際はどこまでも入力できる。
```
↓出力結果
```
(
    [0] => ごりら
    [1] => もぐら
    [2] => 
    [3] => ぱんだ
)
```
</br>

また、上記の記述には`$input = fgets(STDIN);`という記述が2つある。</br>
こちらをまとめてしまう記述方式がある。
```php
<?php
white($input = fgets(STDIN)){
    $array[] = trim($input);
}
print_r($array);
?>
入力：
ごりら
もぐら

ぱんだ
```
↓出力結果
```
Array
(
    [0] => ごりら
    [1] => もぐら
    [2] => 
    [3] => ぱんだ
)
```
